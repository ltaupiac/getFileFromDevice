## 📚 Documentation

- [🔗 Script Usage Guide](TOOLS.md) — Explanation of how `getToken`, `runGetToken.sh`, and `run.sh` work.
- [🔗 Azure AD Configuration Guide](AZURE.md) — Step-by-step instructions to configure the application in Azure AD.

# 📘 Remote Action – Parameters Reference

## 🎯 Purpose
This document describes the input and output parameters expected by the Remote Action `get-file-from-device`, as well as how the file is uploaded to OneDrive.

---

## 🔐 Input Parameters

| Parameter         | Description                                                                 |
|------------------|-----------------------------------------------------------------------------|
| `tenantid`        | Azure AD Tenant ID hosting the application                                 |
| `token`           | OAuth2 token previously generated by the script `runGetToken`              |
| `user_upn`        | UPN (email) of the OneDrive user to which the file will be uploaded        |
| `full_file_path`  | Absolute path of the file to retrieve from the local device                |
| `return_url`      | Boolean: `0` or `1`, `true` or `false` – return the download URL if true   |

---

## 📤 Output Parameters

| Output Variable    | Description                                                                 |
|-------------------|-----------------------------------------------------------------------------|
| `file_uploaded`    | Boolean – `1` if the upload was successful, `0` otherwise                   |
| `file_url`         | URL to download the uploaded file (only if `return_url=true` and `file_uploaded=1`) |

---

## 📂 OneDrive Upload Path Structure

Files are uploaded to the target user's OneDrive in the following structure:

```
/_NexthinkRA_Bucket_/<hostname>/<full_file_path>
```

- `<hostname>` is the name of the machine where the Remote Action is executed.
- `<full_file_path>` is the absolute path of the retrieved file.

> 📌 Example:  
> For a file located at `/private/etc/passwd` on a host named `bingo`,  
> the path in OneDrive will be:  
> `/NexthinkRA_Bucket_/bingo/private/etc/passwd`

---

## 🔎 Notes

- The `token` must be scoped with **Files.ReadWrite.All** permission in Azure AD.
- The `return_url` option is useful for automation scenarios where a script retrieves the download link automatically post-upload.
- Upload process handles path normalization across macOS and Windows systems.
